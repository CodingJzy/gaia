---
title: APIAuthorizationPolicy
keywords: api, Squall,
last_updated: June 9, 2017
tags: [Api,Squall]
summary: "An API Authorization Policy defines what kind of operations a user of a system can do in a namespace. The operations can be any combination of GET, POST, PUT, DELETE,PATCH or HEAD. By default, an API Authorization Policy will only give permissions in the context of the current namespace but you can make it propagate to all the child namespaces.  It is also possible restrict permissions to apply only on a particular subset of the apis by setting the target identities."
sidebar: squall_sidebar
permalink: squall_apiauthorizationpolicy.html
folder: apidoc
---


## Attributes

{% include attribute.html
  name="annotations"
  description="Annotation stores additional information about an entity"
  type="annotations"
  choices=""
  required="False"
  read_only="False"
  deprecated="False"
  creation_only="False"
  autogenerated="False"
  filterable="False"
  orderable="False"
  unique="False"
  unique_scope="None"
%}


{% include attribute.html
  name="associatedTags"
  description="AssociatedTags are the list of tags attached to an entity"
  type="tags_list"
  choices=""
  required="False"
  read_only="False"
  deprecated="False"
  creation_only="False"
  autogenerated="False"
  filterable="False"
  orderable="False"
  unique="False"
  unique_scope="None"
%}


{% include attribute.html
  name="authorizedIdentities"
  description="AuthorizedIdentities defines the list of api identities the policy applies to. "
  type="identity_list"
  choices=""
  required="True"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="False"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="authorizedNamespace"
  description="AuthorizedNamespace defines on what namespace the policy applies."
  type="string"
  choices=""
  required="True"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="createTime"
  description="CreatedTime is the time at which the object was created"
  type="time"
  choices=""
  required="False"
  read_only="True"
  deprecated="False"
  creation_only="False"
  autogenerated="True"
  filterable="False"
  orderable="True"
  unique="False"
  unique_scope="None"
%}


{% include attribute.html
  name="description"
  description="Description is the description of the object."
  type="string"
  choices=""
  required="None"
  read_only="False"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="disabled"
  description="Disabled defines if the propert is disabled."
  type="boolean"
  choices=""
  required="None"
  read_only="False"
  deprecated="None"
  creation_only="None"
  autogenerated="False"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="ID"
  description="ID is the identifier of the object."
  type="string"
  choices=""
  required="None"
  read_only="True"
  deprecated="None"
  creation_only="None"
  autogenerated="True"
  filterable="True"
  orderable="True"
  unique="True"
  unique_scope="None"
%}


{% include attribute.html
  name="metadata"
  description="Metadata contains tags that can only be set during creation. They must all start with the '@' prefix, and should only be used by external systems."
  type="metadata_list"
  choices=""
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="True"
  autogenerated="None"
  filterable="True"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="name"
  description="Name is the name of the entity"
  type="string"
  choices=""
  required="True"
  read_only="False"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="True"
  unique="True"
  unique_scope="None"
%}


{% include attribute.html
  name="namespace"
  description="Namespace tag attached to an entity"
  type="string"
  choices=""
  required="False"
  read_only="True"
  deprecated="False"
  creation_only="True"
  autogenerated="True"
  filterable="True"
  orderable="True"
  unique="False"
  unique_scope="None"
%}


{% include attribute.html
  name="normalizedTags"
  description="NormalizedTags contains the list of normalized tags of the entities"
  type="tags_list"
  choices=""
  required="False"
  read_only="True"
  deprecated="False"
  creation_only="False"
  autogenerated="True"
  filterable="False"
  orderable="False"
  unique="False"
  unique_scope="None"
%}


{% include attribute.html
  name="propagate"
  description="Propagate will propagate the policy to all of its children."
  type="boolean"
  choices=""
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="propagationHidden"
  description="If set to true while the policy is propagating, it won't be visible to children namespace, but still used for policy resolution."
  type="boolean"
  choices=""
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="protected"
  description="Protected defines if the object is protected."
  type="boolean"
  choices=""
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="False"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="subject"
  description="Subject is the subject."
  type="policies_list"
  choices=""
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="False"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="updateTime"
  description="UpdateTime is the time at which an entity was updated."
  type="time"
  choices=""
  required="False"
  read_only="True"
  deprecated="False"
  creation_only="False"
  autogenerated="True"
  filterable="False"
  orderable="True"
  unique="False"
  unique_scope="None"
%}




## Code example

#### Retrieve all APIAuthorizationPolicies 
<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api list apiauthorizationpolicies -n /namespace
```

```go
package main

import (
  "github.com/aporeto-inc/manipulate/manipwebsocket"

  squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main() {

  m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

  if err != nil {
      panic(err)
  }

  var objects squallmodels.APIAuthorizationPoliciesList

  if err = m.RetrieveMany(nil, &amp;objects); err != nil {
    panic(err)
  }

  disconnect()
}
```

```python
import os

from squallmodels import APIAuthorizationPolicy
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APIAuthorizationPolicy()
    objects = []

    try:
        manipulator.retrieve_children(None, obj.identity(), objects)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    for obj in objects:
        print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X GET \
  -H "X-Namespace: namespace" \
  -H "Authorization: token" \
  http://&lt;host&gt;:&lt;port&gt;/apiauthorizationpolicies
```

#### Create a new APIAuthorizationPolicy 
<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api create apiauthorizationpolicies -n /namespace \
  -k authorizedidentities "identity_list" \
  -k authorizednamespace "authorizednamespace" \
  -k name "name"
```

```go
package main

import (
    "github.com/aporeto-inc/manipulate/manipwebsocket"

    squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main () {

    m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

    if err != nil {
        panic(err)
    }

    obj := squallmodels.NewAPIAuthorizationPolicy()
    obj.AuthorizedIdentities = "identity_list"
    obj.AuthorizedNamespace = "authorizednamespace"
    obj.SetName("name")

    if err = m.Create(nil, obj); err != nil {
        panic(err)
    }

    disconnect()
}
```

```python
import os

from squallmodels import APIAuthorizationPolicy
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APIAuthorizationPolicy()
    obj.authorizedIdentities = "identity_list"
    obj.authorizedNamespace = "authorizednamespace"
    obj.name = "name"

    try:
        manipulator.create(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X POST \
  -H "X-Namespace: namespace" \
  -H "Authorization: token" \
  -d authorizedidentities="identity_list" \
  -d authorizednamespace="authorizednamespace" \
  -d name="name" \
  http://&lt;host&gt;:&lt;port&gt;/apiauthorizationpolicies
```


#### Delete a given APIAuthorizationPolicy

<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api delete apiauthorizationpolicy identitifier -n /namespace
```

```go
import (
    "github.com/aporeto-inc/manipulate/manipwebsocket"

    squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main() {

    m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

    if err != nil {
        panic(err)
    }

    obj := squallmodels.NewAPIAuthorizationPolicy()
    obj.SetIdentifier("identifier")

    if err = m.Delete(nil, obj); err != nil {
        panic(err)
    }

    disconnect()
}
```

```python
import os

from squallmodels import APIAuthorizationPolicy
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APIAuthorizationPolicy()
    obj.ID = "identifier"

    try:
        manipulator.delete(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X DELETE \
  -H "X-Namespace: namespace" \
  -H "Authorization: token" \
  http://&lt;host&gt;:&lt;port&gt;/apiauthorizationpolicies/identitifier
```

#### Retrieve a given APIAuthorizationPolicy

<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api get apiauthorizationpolicy identitifier -n /namespace
```

```go
package main

import (
    "github.com/aporeto-inc/manipulate/manipwebsocket"

    squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main() {

    m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

    if err != nil {
        panic(err)
    }

    obj := squallmodels.NewAPIAuthorizationPolicy()
    obj.SetIdentifier("identifier")

    if err = m.Retrieve(nil, obj); err != nil {
        panic(err)
    }

    disconnect()
}
```

```python
import os

from squallmodels import APIAuthorizationPolicy
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APIAuthorizationPolicy()
    obj.ID = "identifier"

    try:
        manipulator.retrieve(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X GET \
-H "X-Namespace: namespace" \
-H "Authorization: token" \
http://&lt;host&gt;:&lt;port&gt;/apiauthorizationpolicies/identifier
```

#### Update a given APIAuthorizationPolicy

<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api update apiauthorizationpolicy identitifier -n /namespace \
  -k authorizedidentities "identity_list" \
  -k authorizednamespace "authorizednamespace" \
  -k name "name"```

```go
import (
    "github.com/aporeto-inc/manipulate/manipwebsocket"

    squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main() {

    m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

    if err != nil {
        panic(err)
    }

    obj := squallmodels.NewAPIAuthorizationPolicy()
    obj.SetIdentifier("identifier")

    if err = m.Retrieve(nil, obj); err != nil {
      panic(err)
    }

    obj.AuthorizedIdentities = "identity_list"
    obj.AuthorizedNamespace = "authorizednamespace"
    obj.SetName("name")

    if err = m.Update(nil, obj); err != nil {
      panic(err)
    }

    disconnect()
}
```

```python
import os

from squallmodels import APIAuthorizationPolicy
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APIAuthorizationPolicy()
    obj.ID = "identifier"

    try:
        manipulator.retrieve(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    obj.authorizedIdentities = "identity_list"
    obj.authorizedNamespace = "authorizednamespace"
    obj.name = "name"

    try:
        manipulator.update(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X PUT \
  -H "X-Namespace: namespace" \
  -H "Authorization: token" \
  -d authorizedidentities="identity_list" \
  -d authorizednamespace="authorizednamespace" \
  -d name="name" \
  http://&lt;host&gt;:&lt;port&gt;/apiauthorizationpolicies/identitifier
```


