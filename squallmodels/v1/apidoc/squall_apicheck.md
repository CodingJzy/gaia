---
title: APICheck
keywords: api, Squall,
last_updated: June 9, 2017
tags: [Api,Squall]
summary: "This API allows to verify is a client identitied by his token is allowed to do some operations on some apis. For example, it allows third party system to impersonate a user and ensure a proxfied request should be allowed."
sidebar: squall_sidebar
permalink: squall_apicheck.html
folder: apidoc
---


## Attributes

{% include attribute.html
  name="authorized"
  description="Authorized contains the results of the check."
  type="authorized_identities"
  choices=""
  required="None"
  read_only="True"
  deprecated="None"
  creation_only="None"
  autogenerated="True"
  filterable="False"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="namespace"
  description="Namespace is the namespace to use to check the api authentication."
  type="string"
  choices=""
  required="True"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="False"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="operation"
  description="Operation is the operation you want to check."
  type="enum"
  choices=" (Create | Delete | Info | Patch | Retrieve | RetrieveMany | Update)"
  required="None"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="True"
  orderable="True"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="targetIdentities"
  description="TargetIdentities contains the list of identities you want to check the authorization."
  type="identity_list"
  choices=""
  required="True"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="False"
  orderable="False"
  unique="None"
  unique_scope="None"
%}


{% include attribute.html
  name="token"
  description="Token is the token to use to check api authentication"
  type="string"
  choices=""
  required="True"
  read_only="None"
  deprecated="None"
  creation_only="None"
  autogenerated="None"
  filterable="False"
  orderable="False"
  unique="None"
  unique_scope="None"
%}




## Code example

#### Create a new APICheck 
<div class="ui top attached tabular menu">
  <a class="item active" data-tab="apoctl">apoctl</a>
  <a class="item" data-tab="golang">Go</a>
  <a class="item" data-tab="python">Python</a>
  <a class="item" data-tab="curl">curl</a>
</div>

```apoctl
apoctl api create apichecks -n /namespace \
  -k namespace "namespace" \
  -k targetidentities "identity_list" \
  -k token "token"
```

```go
package main

import (
    "github.com/aporeto-inc/manipulate/manipwebsocket"

    squallmodels "github.com/aporeto-inc/gaia/squallmodels/current/golang"
)

func main () {

    m, disconnect, err := manipwebsocket.NewWebSocketManipulator("username", "token", "url", "namespace")

    if err != nil {
        panic(err)
    }

    obj := squallmodels.NewAPICheck()
    obj.Namespace = "namespace"
    obj.TargetIdentities = "identity_list"
    obj.Token = "token"

    if err = m.Create(nil, obj); err != nil {
        panic(err)
    }

    disconnect()
}
```

```python
import os

from squallmodels import APICheck
from pymanipulate.maniphttp import HTTPManipulator, PyManipulateError


def main():
    """
    """
    certificate = ("cert.pem", "key.pem")
    manipulator = HTTPManipulator("url", "/namespace", "username", "password", None, certificate)

    obj = APICheck()
    obj.namespace = "namespace"
    obj.targetIdentities = "identity_list"
    obj.token = "token"

    try:
        manipulator.create(None, obj)
    except PyManipulateError as e:
        print "Err: %s" % e.errors[0]
        os._exit(1)

    print obj.to_dict()

    exit(0)


if __name__ == "__main__":
    main()
```

```shell
curl -X POST \
  -H "X-Namespace: namespace" \
  -H "Authorization: token" \
  -d namespace="namespace" \
  -d targetidentities="identity_list" \
  -d token="token" \
  http://&lt;host&gt;:&lt;port&gt;/apichecks
```



